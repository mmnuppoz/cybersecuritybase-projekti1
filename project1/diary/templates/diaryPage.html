<!DOCTYPE html>
<html>
<head>
    <title>Diary</title>
</head>
<body>
    <h1>Welcome to your diary!</h1>

    <form action="{% url 'home' %}" method="POST">
        <!--FLAW 1  Inadequate  CSRF protection-->
        <!-- add csrf_token ({csrf_token})-->
        <label for="title">Title:</label><br>
        <input type="text" id="title" name="title"><br>
        
        <label for="content">Content:</label><br>
        <textarea id="content" name="content" rows="4" cols="50"></textarea><br>
        
        <input type="submit" value="Add Entry">
    </form>

    <h2>Your Entries:</h2>
    <ul>
        {% for entry in diary %}
        <!--FLAW 5: Cross-site Scripting-->
        <!--replace safe with escape-->
        <!-- <li>{{ entry.1 | escape }} - {{ entry.2 | escape}}</li>-->
            <li>{{ entry.1 | safe }} - {{ entry.2 | safe}}</li>
            <a href="{%url 'edit' entry.0%}">Edit</a> |
            <a href="{%url 'delete' entry.0%}">Delete</a>
        {% empty %}
            <li>No entries yet.</li>
        {% endfor %}
    </ul>
</body>
</html>